import './polyfills.server.mjs';
import{b as S,d as I,e as f,f as E,g as M,i as P,j as k,k as L,o as N,p as T,r as V}from"./chunk-T7QUTHYJ.mjs";import{Ea as w,F as c,Pb as F,Qb as _,Z as a,_ as d,ea as m,ga as l,k as v,ka as o,kb as C,la as i,ma as u,qa as b,qb as y,ra as p,wa as s,x,xa as g,ya as h}from"./chunk-W6XYX7DX.mjs";import"./chunk-5XUXGTUW.mjs";function j(e,n){if(e&1&&(o(0,"div",15)(1,"p"),s(2),i()()),e&2){let t=p();a(2),g(t.successMessage)}}function R(e,n){if(e&1&&(o(0,"div",16)(1,"p"),s(2),i()()),e&2){let t=p();a(2),g(t.errorMessage)}}function A(e,n){e&1&&(o(0,"div"),s(1," El correo electr\xF3nico es obligatorio. "),i())}function B(e,n){e&1&&(o(0,"div"),s(1," Ingresa un correo electr\xF3nico v\xE1lido. "),i())}function D(e,n){if(e&1&&(o(0,"div",17),m(1,A,2,0,"div",18)(2,B,2,0,"div",18),i()),e&2){let t=p();a(),l("ngIf",t.emailControl==null||t.emailControl.errors==null?null:t.emailControl.errors.required),a(),l("ngIf",t.emailControl==null||t.emailControl.errors==null?null:t.emailControl.errors.email)}}function q(e,n){e&1&&(o(0,"span",19),c(),o(1,"svg",20),u(2,"circle",21)(3,"path",22),i()())}function z(e,n){e&1&&(o(0,"span",19),c(),o(1,"svg",23),u(2,"path",24),i()())}var G=class e{constructor(n,t,r){this.fb=n;this.authService=t;this.router=r;this.forgotForm=this.fb.group({email:["",[f.required,f.email]]})}forgotForm;isLoading=!1;errorMessage=null;successMessage=null;get emailControl(){return this.forgotForm.get("email")}onSubmit(){this.forgotForm.invalid||(this.isLoading=!0,this.errorMessage=null,this.successMessage=null,this.authService.forgotPassword(this.forgotForm.value.email).pipe(v(()=>this.isLoading=!1)).subscribe({next:n=>{this.successMessage=n.message||"Se ha enviado un correo con instrucciones para recuperar tu contrase\xF1a.",this.forgotForm.reset()},error:n=>{this.errorMessage=n.error.message||"Ocurri\xF3 un error al procesar tu solicitud. Intenta de nuevo m\xE1s tarde."}}))}static \u0275fac=function(t){return new(t||e)(d(T),d(S),d(F))};static \u0275cmp=x({type:e,selectors:[["app-forgot-password"]],standalone:!0,features:[w],decls:24,vars:8,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-indigo-50","to-blue-100","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8","bg-white","p-8","rounded-xl","shadow-lg","border","border-gray-200"],[1,"mt-2","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-center","text-sm","text-gray-600"],["class","bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4 rounded-md","role","alert",4,"ngIf"],["class","bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded-md","role","alert",4,"ngIf"],[1,"mt-8","space-y-6",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","name","email","type","email","formControlName","email","autocomplete","email","required","","placeholder","Correo electr\xF3nico",1,"appearance-none","block","w-full","px-3","py-2.5","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["class","text-xs text-red-500 mt-2 ml-1",4,"ngIf"],[1,"flex","items-center","justify-between"],[1,"text-sm"],["routerLink","/auth/login",1,"font-medium","text-indigo-600","hover:text-indigo-500"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2.5","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm","transition-colors","duration-200",3,"disabled"],["class","absolute left-0 inset-y-0 flex items-center pl-3",4,"ngIf"],["role","alert",1,"bg-green-100","border-l-4","border-green-500","text-green-700","p-4","mb-4","rounded-md"],["role","alert",1,"bg-red-100","border-l-4","border-red-500","text-red-700","p-4","mb-4","rounded-md"],[1,"text-xs","text-red-500","mt-2","ml-1"],[4,"ngIf"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-indigo-500","group-hover:text-indigo-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),s(4," Recuperar contrase\xF1a "),i(),o(5,"p",3),s(6," Ingresa tu correo electr\xF3nico y te enviaremos un enlace para restablecer tu contrase\xF1a "),i()(),m(7,j,3,1,"div",4)(8,R,3,1,"div",5),o(9,"form",6),b("ngSubmit",function(){return r.onSubmit()}),o(10,"div")(11,"label",7),s(12,"Correo electr\xF3nico"),i(),u(13,"input",8),m(14,D,3,2,"div",9),i(),o(15,"div",10)(16,"div",11)(17,"a",12),s(18," Volver a iniciar sesi\xF3n "),i()()(),o(19,"div")(20,"button",13),m(21,q,4,0,"span",14)(22,z,3,0,"span",14),s(23),i()()()()()),t&2&&(a(7),l("ngIf",r.successMessage),a(),l("ngIf",r.errorMessage),a(),l("formGroup",r.forgotForm),a(5),l("ngIf",(r.emailControl==null?null:r.emailControl.invalid)&&((r.emailControl==null?null:r.emailControl.dirty)||(r.emailControl==null?null:r.emailControl.touched))),a(6),l("disabled",r.isLoading||r.forgotForm.invalid),a(),l("ngIf",r.isLoading),a(),l("ngIf",!r.isLoading),a(),h(" ",r.isLoading?"Enviando...":"Enviar enlace de recuperaci\xF3n"," "))},dependencies:[y,C,V,P,I,E,M,N,k,L,_],encapsulation:2})};export{G as ForgotPasswordComponent};
