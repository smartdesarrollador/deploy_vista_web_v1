import{$a as R,Ea as S,I as l,N as d,P as a,T as t,U as n,Ua as E,V as m,Va as F,Z as f,Za as I,_ as g,ab as p,bb as L,cb as k,da as s,ea as _,eb as M,fa as x,fb as T,gb as V,k as w,ka as b,kb as P,lb as A,nb as G,s as c,t as h,y as u,ya as y,z as v}from"./chunk-264H5AXG.js";function N(e,i){if(e&1&&(t(0,"div",40)(1,"p"),s(2),n()()),e&2){let o=g();l(2),_(o.errorMessage)}}function B(e,i){e&1&&(t(0,"div"),s(1," El nombre es obligatorio. "),n())}function j(e,i){e&1&&(t(0,"div"),s(1," El nombre debe tener al menos 3 caracteres. "),n())}function z(e,i){if(e&1&&(t(0,"div",41),d(1,B,2,0,"div",42)(2,j,2,0,"div",42),n()),e&2){let o=g();l(),a("ngIf",o.nameControl==null||o.nameControl.errors==null?null:o.nameControl.errors.required),l(),a("ngIf",o.nameControl==null||o.nameControl.errors==null?null:o.nameControl.errors.minlength)}}function H(e,i){e&1&&(t(0,"div"),s(1," El correo electr\xF3nico es obligatorio. "),n())}function D(e,i){e&1&&(t(0,"div"),s(1," Ingresa un correo electr\xF3nico v\xE1lido. "),n())}function Z(e,i){if(e&1&&(t(0,"div",41),d(1,H,2,0,"div",42)(2,D,2,0,"div",42),n()),e&2){let o=g();l(),a("ngIf",o.emailControl==null||o.emailControl.errors==null?null:o.emailControl.errors.required),l(),a("ngIf",o.emailControl==null||o.emailControl.errors==null?null:o.emailControl.errors.email)}}function O(e,i){e&1&&(u(),t(0,"svg",43),m(1,"path",44)(2,"path",45),n())}function $(e,i){e&1&&(u(),t(0,"svg",43),m(1,"path",46),n())}function Y(e,i){e&1&&(t(0,"div"),s(1," La contrase\xF1a es obligatoria. "),n())}function J(e,i){e&1&&(t(0,"div"),s(1," La contrase\xF1a debe tener al menos 8 caracteres. "),n())}function K(e,i){e&1&&(t(0,"div"),s(1," La contrase\xF1a debe incluir may\xFAsculas, min\xFAsculas, n\xFAmeros y caracteres especiales. "),n())}function Q(e,i){if(e&1&&(t(0,"div",41),d(1,Y,2,0,"div",42)(2,J,2,0,"div",42)(3,K,2,0,"div",42),n()),e&2){let o=g();l(),a("ngIf",o.passwordControl==null||o.passwordControl.errors==null?null:o.passwordControl.errors.required),l(),a("ngIf",o.passwordControl==null||o.passwordControl.errors==null?null:o.passwordControl.errors.minlength),l(),a("ngIf",o.passwordControl==null||o.passwordControl.errors==null?null:o.passwordControl.errors.pattern)}}function U(e,i){e&1&&(u(),t(0,"svg",43),m(1,"path",44)(2,"path",45),n())}function W(e,i){e&1&&(u(),t(0,"svg",43),m(1,"path",46),n())}function X(e,i){e&1&&(t(0,"div"),s(1," Confirma tu contrase\xF1a. "),n())}function ee(e,i){e&1&&(t(0,"div"),s(1," Las contrase\xF1as no coinciden. "),n())}function te(e,i){if(e&1&&(t(0,"div",41),d(1,X,2,0,"div",42)(2,ee,2,0,"div",42),n()),e&2){let o=g();l(),a("ngIf",o.passwordConfirmationControl==null||o.passwordConfirmationControl.errors==null?null:o.passwordConfirmationControl.errors.required),l(),a("ngIf",o.passwordConfirmationControl==null||o.passwordConfirmationControl.errors==null?null:o.passwordConfirmationControl.errors.passwordMismatch)}}function re(e,i){e&1&&(t(0,"span",47),u(),t(1,"svg",48),m(2,"circle",49)(3,"path",50),n()())}function ne(e,i){e&1&&(t(0,"span",47),u(),t(1,"svg",51),m(2,"path",52),n()())}var q=class e{fb=c(A);authService=c(I);router=c(E);registerForm;isLoading=!1;errorMessage="";showPassword=!1;showConfirmPassword=!1;ngOnInit(){this.initForm()}initForm(){this.registerForm=this.fb.group({name:["",[p.required,p.minLength(3)]],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(8),p.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]],password_confirmation:["",[p.required]],rol:["cliente",[p.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(i){let o=i.get("password")?.value,r=i.get("password_confirmation")?.value;return o!==r?(i.get("password_confirmation")?.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.isLoading=!0,this.errorMessage="",this.authService.register(this.registerForm.value).pipe(w(()=>this.isLoading=!1)).subscribe({next:i=>{i?this.router.navigate(["/"]):this.errorMessage="Error al registrar usuario. Por favor, intenta de nuevo."},error:i=>{this.errorMessage="Error al registrar usuario. Por favor, intenta de nuevo.",console.error("Register error:",i)}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}get nameControl(){return this.registerForm.get("name")}get emailControl(){return this.registerForm.get("email")}get passwordControl(){return this.registerForm.get("password")}get passwordConfirmationControl(){return this.registerForm.get("password_confirmation")}get rolControl(){return this.registerForm.get("rol")}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=h({type:e,selectors:[["app-register"]],standalone:!0,features:[b],decls:67,vars:16,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-indigo-50","to-blue-100","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8","bg-white","p-8","rounded-xl","shadow-lg","border","border-gray-200"],[1,"mt-2","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-center","text-sm","text-gray-600"],["routerLink","/auth/login",1,"font-medium","text-indigo-600","hover:text-indigo-500"],["class","bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded-md","role","alert",4,"ngIf"],[1,"mt-6","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-5"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","name","name","name","type","text","formControlName","name","autocomplete","name","required","","placeholder","Tu nombre completo",1,"appearance-none","block","w-full","px-3","py-2.5","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["class","text-xs text-red-500 mt-2 ml-1",4,"ngIf"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","name","email","type","email","formControlName","email","autocomplete","email","required","","placeholder","tu.correo@ejemplo.com",1,"appearance-none","block","w-full","px-3","py-2.5","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],[1,"relative"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password","name","password","formControlName","password","autocomplete","new-password","required","","placeholder","********",1,"appearance-none","block","w-full","px-3","py-2.5","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"type"],["type","button",1,"absolute","right-0","top-8","pr-3","flex","items-center","text-sm","leading-5",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-gray-500","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],[1,"mt-1","text-xs","text-gray-500"],["for","password_confirmation",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password_confirmation","name","password_confirmation","formControlName","password_confirmation","autocomplete","new-password","required","","placeholder","********",1,"appearance-none","block","w-full","px-3","py-2.5","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"type"],["type","hidden","formControlName","rol"],[1,"mt-8"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2.5","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm","transition-colors","duration-200",3,"disabled"],["class","absolute left-0 inset-y-0 flex items-center pl-3",4,"ngIf"],[1,"relative","mt-6"],[1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-gray-300"],[1,"relative","flex","justify-center","text-sm"],[1,"px-2","bg-white","text-gray-500"],[1,"mt-6","grid","grid-cols-2","gap-3"],["type","button",1,"w-full","inline-flex","justify-center","py-2.5","px-4","border","border-gray-300","rounded-md","shadow-sm","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","transition-colors","duration-200"],["viewBox","0 0 24 24","width","24","height","24","xmlns","http://www.w3.org/2000/svg",1,"h-5","w-5","mr-2"],["transform","matrix(1, 0, 0, 1, 27.009001, -39.238998)"],["fill","#4285F4","d","M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"],["fill","#34A853","d","M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"],["fill","#FBBC05","d","M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"],["fill","#EA4335","d","M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"],["fill","#1877F2","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"h-5","w-5","mr-2"],["d","M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"],["role","alert",1,"bg-red-100","border-l-4","border-red-500","text-red-700","p-4","mb-4","rounded-md"],[1,"text-xs","text-red-500","mt-2","ml-1"],[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-indigo-500","group-hover:text-indigo-400"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),s(4," Crear una cuenta "),n(),t(5,"p",3),s(6," \xBFYa tienes una cuenta? "),t(7,"a",4),s(8," Inicia sesi\xF3n "),n()()(),d(9,N,3,1,"div",5),t(10,"form",6),f("ngSubmit",function(){return r.onSubmit()}),t(11,"div",7)(12,"div")(13,"label",8),s(14,"Nombre completo"),n(),m(15,"input",9),d(16,z,3,2,"div",10),n(),t(17,"div")(18,"label",11),s(19,"Correo electr\xF3nico"),n(),m(20,"input",12),d(21,Z,3,2,"div",10),n(),t(22,"div",13)(23,"label",14),s(24,"Contrase\xF1a"),n(),m(25,"input",15),t(26,"button",16),f("click",function(){return r.togglePasswordVisibility()}),d(27,O,3,0,"svg",17)(28,$,2,0,"svg",17),n(),d(29,Q,4,3,"div",10),t(30,"p",18),s(31," Debe contener al menos 8 caracteres, una may\xFAscula, una min\xFAscula, un n\xFAmero y un caracter especial "),n()(),t(32,"div",13)(33,"label",19),s(34,"Confirmar contrase\xF1a"),n(),m(35,"input",20),t(36,"button",16),f("click",function(){return r.toggleConfirmPasswordVisibility()}),d(37,U,3,0,"svg",17)(38,W,2,0,"svg",17),n(),d(39,te,3,2,"div",10),n(),m(40,"input",21),n(),t(41,"div",22)(42,"button",23),d(43,re,4,0,"span",24)(44,ne,3,0,"span",24),s(45),n()(),t(46,"div",25)(47,"div",26),m(48,"div",27),n(),t(49,"div",28)(50,"span",29),s(51,"o reg\xEDstrate con"),n()()(),t(52,"div",30)(53,"button",31),u(),t(54,"svg",32)(55,"g",33),m(56,"path",34)(57,"path",35)(58,"path",36)(59,"path",37),n()(),v(),t(60,"span"),s(61,"Google"),n()(),t(62,"button",31),u(),t(63,"svg",38),m(64,"path",39),n(),v(),t(65,"span"),s(66,"Facebook"),n()()()()()()),o&2&&(l(9),a("ngIf",r.errorMessage),l(),a("formGroup",r.registerForm),l(6),a("ngIf",(r.nameControl==null?null:r.nameControl.invalid)&&((r.nameControl==null?null:r.nameControl.dirty)||(r.nameControl==null?null:r.nameControl.touched))),l(5),a("ngIf",(r.emailControl==null?null:r.emailControl.invalid)&&((r.emailControl==null?null:r.emailControl.dirty)||(r.emailControl==null?null:r.emailControl.touched))),l(4),a("type",r.showPassword?"text":"password"),l(2),a("ngIf",!r.showPassword),l(),a("ngIf",r.showPassword),l(),a("ngIf",(r.passwordControl==null?null:r.passwordControl.invalid)&&((r.passwordControl==null?null:r.passwordControl.dirty)||(r.passwordControl==null?null:r.passwordControl.touched))),l(6),a("type",r.showConfirmPassword?"text":"password"),l(2),a("ngIf",!r.showConfirmPassword),l(),a("ngIf",r.showConfirmPassword),l(),a("ngIf",(r.passwordConfirmationControl==null?null:r.passwordConfirmationControl.invalid)&&((r.passwordConfirmationControl==null?null:r.passwordConfirmationControl.dirty)||(r.passwordConfirmationControl==null?null:r.passwordConfirmationControl.touched))),l(3),a("disabled",r.isLoading||r.registerForm.invalid),l(),a("ngIf",r.isLoading),l(),a("ngIf",!r.isLoading),l(),x(" ",r.isLoading?"Registrando...":"Registrarse"," "))},dependencies:[S,y,G,M,R,L,k,P,T,V,F]})};export{q as RegisterComponent};
